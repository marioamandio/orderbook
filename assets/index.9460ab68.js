import{s as b,j as a,a as e,T as C,r as g,u as F,F as O,b as T,c as A,B,d as p,e as t,f as w,R as P,g as E}from"./vendor.c36c2645.js";const L=function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))h(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const s of n.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&h(s)}).observe(document,{childList:!0,subtree:!0});function m(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerpolicy&&(n.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?n.credentials="include":r.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function h(r){if(r.ep)return;r.ep=!0;const n=m(r);fetch(r.href,n)}};L();const M=b("div")({display:"flex",justifyContent:"space-between"}),_=({orderBook:o})=>a(M,{children:[e("div",{children:"Order book Viewer"}),e("div",{children:o})]}),j=b(C)({maxWidth:"50%","@media (max-width: 768px)":{maxWidth:"85%"},"@media (max-width: 350px)":{maxWidth:"95%"},margin:"auto",justifyContent:"center","&&&& .MuiTableCell-root":{color:"inherit",border:0,padding:8}}),x=(o=[],c)=>o.filter(([m,h])=>h>0).concat(c).slice(0,15),f=new WebSocket("wss://www.cryptofacilities.com/ws/v1"),N=()=>{const[o,c]=g.exports.useState(!1),[m,h]=g.exports.useState(!1),[r,n]=g.exports.useState(null),[s,y]=g.exports.useState({asks:[],bids:[]});f.onerror=i=>n(i),f.onclose=()=>console.warn("ws closed"),f.onmessage=i=>{if(o)return;const{asks:l,bids:u}=JSON.parse(i.data);y({asks:x(l,s.asks),bids:x(u,s.bids)})},g.exports.useEffect(()=>(h(!0),f.onopen=()=>f.send(JSON.stringify({event:"subscribe",feed:"book_ui_1",product_ids:["PI_XBTUSD"]})),h(!1),()=>{f.close()}),[]),g.exports.useMemo(()=>{o&&y({asks:[],bids:[]})},[o]);const S=F("(min-width:600px)"),k=()=>S?a(p,{children:[e(t,{align:"right",children:"Size"}),e(t,{align:"right",children:"Price"}),e(t,{align:"right",children:"Price"}),e(t,{align:"right",children:"Size"})]}):a(p,{children:[e(t,{align:"center",children:"Size"}),e(t,{align:"center",children:"Price"})]}),v=()=>{if(S){const i=s.bids.sort().reverse(),l=s.asks.sort(),u=new Array(Math.max(s.asks.length,s.bids.length)).fill(!0);return e(w,{children:u.map((W,d)=>a(p,{style:{border:0},children:[e(t,{align:"right",children:i[d]?i[d][1]:""}),e(t,{align:"right",style:{color:"#1CE815"},children:i[d]?i[d][0].toFixed(2):""}),e(t,{align:"right",style:{color:"#FE0C0A"},children:l[d]?l[d][0].toFixed(2):""}),e(t,{align:"right",children:l[d]?l[d][1]:""})]},d))})}return a(w,{children:[s.asks.sort().reverse().map(([i,l],u)=>a(p,{style:{border:0},children:[e(t,{align:"right",children:l}),e(t,{align:"right",style:{color:"#FE0C0A"},children:i.toFixed(2)})]},u)),s.bids.sort().reverse().map(([i,l],u)=>a(p,{style:{border:0},children:[e(t,{align:"right",children:l}),e(t,{align:"right",style:{color:"#1CE815"},children:i.toFixed(2)})]},u))]})};return m&&!r?e("div",{children:"Loading..."}):r?e("div",{children:"Something went wrong..."}):a(O,{children:[e(j,{children:a(T,{"aria-label":"simple table",children:[e(A,{children:k()}),v()]})}),e(B,{onClick:()=>c(!o),variant:"contained",color:"success",children:o?"Start Feed":"Stop Feed"})]})},R=b("div")({background:"#0f4555",padding:"2rem",color:"#ddd",maxWidth:"800px",margin:"auto",minHeight:"400px",textAlign:"center"});function H(){return a(R,{className:"App",children:[e(_,{orderBook:"PI_XBTUSD"}),e("hr",{}),e(N,{})]})}P.render(e(E.StrictMode,{children:e(H,{})}),document.getElementById("root"));
