import{s as y,j as a,a as e,T as O,r as g,u as T,F as x,b as A,c as B,d as m,e as i,B as P,f as k,R as E,g as L}from"./vendor.c36c2645.js";const M=function(){const d=document.createElement("link").relList;if(d&&d.supports&&d.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))u(r);new MutationObserver(r=>{for(const t of r)if(t.type==="childList")for(const n of t.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&u(n)}).observe(document,{childList:!0,subtree:!0});function p(r){const t={};return r.integrity&&(t.integrity=r.integrity),r.referrerpolicy&&(t.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?t.credentials="include":r.crossorigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function u(r){if(r.ep)return;r.ep=!0;const t=p(r);fetch(r.href,t)}};M();const _=y("div")({display:"flex",justifyContent:"space-between"}),j=({orderBook:s})=>a(_,{children:[e("div",{children:"Order book Viewer"}),e("div",{children:s})]}),N=y(O)({maxWidth:"50%","@media (max-width: 768px)":{maxWidth:"85%"},"@media (max-width: 350px)":{maxWidth:"95%"},margin:"auto",justifyContent:"center","&&&& .MuiTableCell-root":{color:"inherit",border:0,padding:8}}),v=(s=[],d)=>s.filter(([p,u])=>u>0).concat(d).slice(0,15),b=(s,d)=>s[0]-d[0],f=new WebSocket("wss://www.cryptofacilities.com/ws/v1"),R=()=>{const[s,d]=g.exports.useState(!1),[p,u]=g.exports.useState(!1),[r,t]=g.exports.useState(null),[n,S]=g.exports.useState({asks:[],bids:[]}),w=T("(min-width:600px)");if(f.onerror=o=>t(o),f.onclose=()=>console.warn("ws closed"),f.onmessage=o=>{if(s)return;const{asks:l,bids:h}=JSON.parse(o.data);S({asks:v(l,n.asks),bids:v(h,n.bids)})},g.exports.useEffect(()=>(u(!0),f.onopen=()=>{console.log("on open"),f.send(JSON.stringify({event:"subscribe",feed:"book_ui_1",product_ids:["PI_XBTUSD"]}))},u(!1),()=>{f.close()}),[]),g.exports.useMemo(()=>{s&&S({asks:[],bids:[]})},[s]),p&&!r)return e("div",{children:"Loading..."});if(r)return e("div",{children:"Something went wrong..."});const C=()=>a(m,{children:[e(i,{align:"right",children:"Size"}),e(i,{align:"right",children:"Price"}),w&&a(x,{children:[e(i,{align:"right",children:"Price"}),e(i,{align:"right",children:"Size"})]})]}),F=()=>{if(w){const o=n.bids.sort(b).reverse(),l=n.asks.sort(b),h=new Array(Math.max(n.asks.length,n.bids.length)).fill(!0);return e(k,{children:h.map((I,c)=>a(m,{style:{border:0},children:[e(i,{align:"right",children:o[c]?o[c][1]:""}),e(i,{align:"right",style:{color:"#1CE815"},children:o[c]?o[c][0].toFixed(2):""}),e(i,{align:"right",style:{color:"#FE0C0A"},children:l[c]?l[c][0].toFixed(2):""}),e(i,{align:"right",children:l[c]?l[c][1]:""})]},c))})}return a(k,{children:[n.asks.sort(b).reverse().map(([o,l],h)=>a(m,{style:{border:0},children:[e(i,{align:"right",children:l}),e(i,{align:"right",style:{color:"#FE0C0A"},children:o.toFixed(2)})]},h)),n.bids.sort(b).reverse().map(([o,l],h)=>a(m,{style:{border:0},children:[e(i,{align:"right",children:l}),e(i,{align:"right",style:{color:"#1CE815"},children:o.toFixed(2)})]},h))]})};return a(x,{children:[e(N,{children:a(A,{"aria-label":"simple table",children:[e(B,{children:C()}),F()]})}),e(P,{onClick:()=>d(!s),variant:"contained",color:"success",children:s?"Start Feed":"Stop Feed"})]})},H=y("div")({background:"#0f4555",padding:"2rem",color:"#ddd",maxWidth:"800px",margin:"auto",minHeight:"400px",textAlign:"center"});function W(){return a(H,{className:"App",children:[e(j,{orderBook:"PI_XBTUSD"}),e("hr",{}),e(R,{})]})}E.render(e(L.StrictMode,{children:e(W,{})}),document.getElementById("root"));
